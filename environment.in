# Configure to suit
ARCH=$(uname -m)
OS=$(uname -s|tr A-Z a-z)
CLASSPATH_HOME=$HOME/projects/classpath/classpath
CLASSPATH_RELEASE_HOME=$HOME/projects/classpath/classpath.release
WORKING_DIR=${HOME}/builder
INSTALL_DIR=${HOME}/build
CLASSPATH_INSTALL=${INSTALL_DIR}/classpath
CLASSPATH_RELEASE_INSTALL=$INSTALL_DIR/classpath.release
PARALLEL_JOBS=$(($(getconf _NPROCESSORS_ONLN) + 1))
MAKE_VARIABLE_WARNINGS="--warn-undefined-variables"
MAKE_OPTS="-j ${PARALLEL_JOBS} ${MAKE_VARIABLE_WARNINGS}"
JIKESRVM_HOME=$HOME/projects/classpath/jikesrvm
JIKESRVM_CACHE=$JIKESRVM_HOME/cache
JAMVM_HOME=$HOME/projects/classpath/jamvm
JAMVM_INSTALL=$INSTALL_DIR/jamvm
CACAO_HOME=$HOME/projects/classpath/cacao
CACAO_INSTALL=$INSTALL_DIR/cacao
ICEDTEA_HOME=$HOME/projects/openjdk/icedtea7
BRANDWEG_HOME=$HOME/projects/classpath/brandweg
GCC_HOME=$HOME/projects/classpath/gcj/sources/gcc
GCC_INSTALL=${INSTALL_DIR}/gcj 
GCJ_DEPENDENCIES=$HOME/projects/classpath/gcj/dependencies
GCJ_ECJ_JAR=${GCJ_DEPENDENCIES}/ecj.2007.jar
ECJ_JAR=$HOME/bin/ecj.jar
OLD_ECJ=/usr/bin/ecj-gcj-3.6
XMMS_HOME=$HOME/projects/xmms
XMMS_INSTALL=$INSTALL_DIR/xmms
TRIM_HOME=$HOME/projects/trim
TRIM_INSTALL=$INSTALL_DIR/trim
OPENJDK_HOME=$HOME/projects/openjdk
OPENJDK7_DIR=/home/andrew/projects/openjdk/upstream/icedtea
OPENJDK6_DIR=/home/andrew/projects/openjdk/upstream/jdk6
ICEDTEA_WITH_CACAO="no"
ICEDTEA_WITH_VISUALVM="no"
ICEDTEA_WITH_SHARK="no"
ICEDTEA_WITH_PULSEAUDIO="yes"
ICEDTEA_WITH_NATIVE_ECJ="no"
ICEDTEA_WITH_RHINO="yes"
ICEDTEA_WITH_DOCS="yes"
ICEDTEA_WITH_PLUGIN="yes"
ICEDTEA_WITH_NETX="yes"
ICEDTEA_WITH_TESTS="yes"
ICEDTEA_WITH_JDK_TESTS="no"
ICEDTEA_WITH_LANGTOOLS_TESTS="no"
ICEDTEA_WITH_HOTSPOT_TESTS="yes"
ICEDTEA_WITH_SYSTEMTAP=yes
ICEDTEA_WITH_SUNEC=yes
ICEDTEA_WITH_NEW_PLUGIN="no"
ICEDTEA_WITH_NSS=yes
ICEDTEA_WITH_SYSTEMTAP=yes
ICEDTEA_WITH_SUNEC=yes
ICEDTEA_WITH_NATIVE_DEBUGINFO=yes
ICEDTEA_WITH_JAVA_DEBUGINFO=yes
ICEDTEA6_WITH_NIO2=yes
ICEDTEA6_WITH_LCMS2=yes
ICEDTEA_WITH_SYSTEM_LCMS=yes
ICEDTEA_WITH_SYSTEM_GIO=yes
ICEDTEA_WITH_SYSTEM_PCSC=yes
ICEDTEA_WITH_SYSTEM_GTK=yes
CLASSPATH_WITH_GSTREAMER="no"
CLASSPATH_WITH_QT="no"
CLASSPATH_WITH_TOOL_WRAPPERS="no"
CLASSPATH_WITH_DOCS="no"
CLASSPATH_WITH_PLUGIN="no"
CLASSPATH_WITH_XMLJ="yes"
CLASSPATH_WITH_WERROR="no"
CLASSPATH_WITH_WARNINGS="no"
CLASSPATH_WITH_GJDOC="yes"
CLASSPATH_TOOLS_HOME=$HOME/projects/classpath/cp-tools
CLASSPATH_TOOLS_INSTALL=$INSTALL_DIR/cp-tools
VM=${GCC_INSTALL}/bin/gij
TEST_VM=${VM}
MAUVE_HOME=$HOME/projects/classpath/mauve
CVMI_DIR=$HOME/projects/openjdk/cvi/cvmi
LLVM_HOME=$HOME/projects/openjdk/llvm
LLVM_INSTALL=$INSTALL_DIR/llvm
ICEDTEA6_INSTALL=/usr/lib/jvm/icedtea6
SYSTEM_ICEDTEA6=/usr/lib/jvm/icedtea6
SYSTEM_GCJ=/usr/lib/jvm/gcj-jdk
SYSTEM_GCJ_VERSION=4.8.1
BOOTSTRAP_ICEDTEA6=${INSTALL_DIR}/icedtea6-1.8
BOOTSTRAP_ICEDTEA7=${SYSTEM_ICEDTEA6}
CLASSPATH_JDK_INSTALL=${SYSTEM_GCJ}
DVBTOOLS_HOME=$HOME/projects/dvb/dvbtools
DVBTOOLS_INSTALL=$INSTALL_DIR/dvbtools
ICEDTEA7_INSTALL=$INSTALL_DIR/icedtea
CACIOCAVALLO_ZIP=
CACIOCAVALLO_DIR=
CLOSURES_ZIP=
CLOSURES_DIR=
NIO2_ZIP=
NIO2_DIR=
CVMI_ZIP=
CACAO6_ZIP=/home/downloads/java/drops/cacao/cacao6.tar.gz
CACAO7_ZIP=/home/downloads/java/drops/cacao/cacao7.tar.gz
CACAO8_ZIP=/home/downloads/java/drops/cacao/cacao8.tar.gz
DYNAMITE_HOME=$HOME/academic/research/dynamite
DYNAMITE_INSTALL=$INSTALL_DIR/dynamite
DYNAMITE_DEBUG_LEVEL=FINE
MUSIK_INSTALL=$INSTALL_DIR/musik
HOTSPOT6_BUILD=original
HOTSPOT6_1_6_BUILD=default
HOTSPOT6_HG_BUILD=original
HOTSPOT7_BUILD=
ARCHIVER_HOME=$HOME/projects/mail_archiver
ARCHIVER_INSTALL=$INSTALL_DIR/archiver
DROPS_DIR=/home/downloads/java/drops
OPENJDK6_B09_ZIP=/mnt/home/andrew/java/drops/openjdk-6-src-b09-11_apr_2008.tar.gz
OPENJDK6_B16_ZIP=/usr/portage/distfiles/openjdk-6-src-b16-24_apr_2009.tar.gz
OPENJDK6_B17_ZIP=/usr/portage/distfiles/openjdk-6-src-b17-14_oct_2009.tar.gz
OPENJDK6_B18_ZIP=/usr/portage/distfiles/openjdk-6-src-b18-16_feb_2010.tar.gz
OPENJDK6_B19_ZIP=/usr/portage/distfiles/openjdk-6-src-b19-15_apr_2010.tar.gz
OPENJDK6_B20_ZIP=/usr/portage/distfiles/openjdk-6-src-b20-21_jun_2010.tar.gz
OPENJDK6_B21_ZIP=/home/downloads/java/drops/openjdk-6-src-b21-20_jan_2011.tar.gz
OPENJDK6_B22_ZIP=/home/downloads/java/drops/openjdk-6-src-b22-28_feb_2011.tar.gz
OPENJDK6_B23_ZIP=/home/downloads/java/drops/openjdk-6-src-b23-05_jul_2011.tar.gz
OPENJDK6_B24_ZIP=/home/downloads/java/drops/openjdk-6-src-b24-14_nov_2011.tar.gz
OPENJDK6_B25_ZIP=/home/downloads/java/drops/openjdk-6-src-b25-01_may_2012.tar.gz
OPENJDK6_B26_ZIP=${DROPS_DIR}/openjdk-6-src-b26-21_sep_2012.tar.gz
OPENJDK6_B27_ZIP=${DROPS_DIR}/openjdk-6-src-b27-26_oct_2012.tar.gz
OPENJDK6_B30_ZIP=${DROPS_DIR}/openjdk-6-src-b30-21_jan_2014.tar.xz
OPENJDK6_B31_ZIP=${DROPS_DIR}/openjdk-6-src-b31-15_apr_2014.tar.xz
OPENJDK6_B32_ZIP=${DROPS_DIR}/openjdk-6-src-b32-15_jul_2014.tar.xz
OPENJDK6_B33_ZIP=${DROPS_DIR}/openjdk-6-src-b33-14_oct_2014.tar.xz
OPENJDK6_B34_ZIP=${DROPS_DIR}/openjdk-6-src-b34-20_jan_2015.tar.xz
OPENJDK6_ZIP=${DROPS_DIR}/openjdk6.tar.xz
HOTSPOT6_ZIP=/home/downloads/java/icedtea/hs17.tar.gz
HOTSPOT6_HG_ZIP=/home/downloads/java/icedtea/hs17.tar.gz
HOTSPOT6_B14_ZIP=/home/downloads/java/icedtea/hotspot-14b16.tar.gz
HOTSPOT6_B16_ZIP=/home/downloads/java/icedtea/hs16.tar.gz
AARCH64_24_ZIP=/home/downloads/java/drops/hotspot/aarch64.tar.gz
AARCH64_25_ZIP=/home/downloads/java/drops/hotspot/aarch64.tar.bz2
AARCH64_ZIP=/home/downloads/java/drops/icedtea7/aarch64.tar.bz2
OPENJDK7_ZIP=/home/downloads/java/drops/icedtea7/openjdk.tar.gz
CORBA7_ZIP=/home/downloads/java/drops/icedtea7/corba.tar.gz
JAXP7_ZIP=/home/downloads/java/drops/icedtea7/jaxp.tar.gz
JAXWS7_ZIP=/home/downloads/java/drops/icedtea7/jaxws.tar.gz
JDK7_ZIP=/home/downloads/java/drops/icedtea7/jdk.tar.gz
LANGTOOLS7_ZIP=/home/downloads/java/drops/icedtea7/langtools.tar.gz
HOTSPOT7_ZIP=/home/downloads/java/drops/icedtea7/hotspot.tar.gz
OPENJDK7_20_ZIP=/home/downloads/java/drops/icedtea7/2.0/openjdk.tar.gz
CORBA7_20_ZIP=/home/downloads/java/drops/icedtea7/2.0/corba.tar.gz
JAXP7_20_ZIP=/home/downloads/java/drops/icedtea7/2.0/jaxp.tar.gz
JAXWS7_20_ZIP=/home/downloads/java/drops/icedtea7/2.0/jaxws.tar.gz
JDK7_20_ZIP=/home/downloads/java/drops/icedtea7/2.0/jdk.tar.gz
LANGTOOLS7_20_ZIP=/home/downloads/java/drops/icedtea7/2.0/langtools.tar.gz
HOTSPOT7_20_ZIP=/home/downloads/java/drops/icedtea7/2.0/hotspot.tar.gz
OPENJDK7_21_ZIP=/home/downloads/java/drops/icedtea7/2.1/openjdk.tar.gz
CORBA7_21_ZIP=/home/downloads/java/drops/icedtea7/2.1/corba.tar.gz
JAXP7_21_ZIP=/home/downloads/java/drops/icedtea7/2.1/jaxp.tar.gz
JAXWS7_21_ZIP=/home/downloads/java/drops/icedtea7/2.1/jaxws.tar.gz
JDK7_21_ZIP=/home/downloads/java/drops/icedtea7/2.1/jdk.tar.gz
LANGTOOLS7_21_ZIP=/home/downloads/java/drops/icedtea7/2.1/langtools.tar.gz
HOTSPOT7_21_ZIP=/home/downloads/java/drops/icedtea7/2.1/hotspot.tar.gz
OPENJDK7_22_ZIP=/home/downloads/java/drops/icedtea7/2.2/openjdk.tar.gz
CORBA7_22_ZIP=/home/downloads/java/drops/icedtea7/2.2/corba.tar.gz
JAXP7_22_ZIP=/home/downloads/java/drops/icedtea7/2.2/jaxp.tar.gz
JAXWS7_22_ZIP=/home/downloads/java/drops/icedtea7/2.2/jaxws.tar.gz
JDK7_22_ZIP=/home/downloads/java/drops/icedtea7/2.2/jdk.tar.gz
LANGTOOLS7_22_ZIP=/home/downloads/java/drops/icedtea7/2.2/langtools.tar.gz
HOTSPOT7_22_ZIP=/home/downloads/java/drops/icedtea7/2.2/hotspot.tar.gz
OPENJDK7_23_ZIP=/home/downloads/java/drops/icedtea7/2.3/openjdk.tar.gz
CORBA7_23_ZIP=/home/downloads/java/drops/icedtea7/2.3/corba.tar.gz
JAXP7_23_ZIP=/home/downloads/java/drops/icedtea7/2.3/jaxp.tar.gz
JAXWS7_23_ZIP=/home/downloads/java/drops/icedtea7/2.3/jaxws.tar.gz
JDK7_23_ZIP=/home/downloads/java/drops/icedtea7/2.3/jdk.tar.gz
LANGTOOLS7_23_ZIP=/home/downloads/java/drops/icedtea7/2.3/langtools.tar.gz
HOTSPOT7_23_ZIP=/home/downloads/java/drops/icedtea7/2.3/hotspot.tar.gz
OPENJDK7_24_ZIP=/home/downloads/java/drops/icedtea7/2.4/openjdk.tar.gz
CORBA7_24_ZIP=/home/downloads/java/drops/icedtea7/2.4/corba.tar.gz
JAXP7_24_ZIP=/home/downloads/java/drops/icedtea7/2.4/jaxp.tar.gz
JAXWS7_24_ZIP=/home/downloads/java/drops/icedtea7/2.4/jaxws.tar.gz
JDK7_24_ZIP=/home/downloads/java/drops/icedtea7/2.4/jdk.tar.gz
LANGTOOLS7_24_ZIP=/home/downloads/java/drops/icedtea7/2.4/langtools.tar.gz
HOTSPOT7_24_ZIP=/home/downloads/java/drops/icedtea7/2.4/hotspot.tar.gz
OPENJDK7_25_ZIP=/home/downloads/java/drops/icedtea7/2.5/openjdk.tar.gz
CORBA7_25_ZIP=/home/downloads/java/drops/icedtea7/2.5/corba.tar.gz
JAXP7_25_ZIP=/home/downloads/java/drops/icedtea7/2.5/jaxp.tar.gz
JAXWS7_25_ZIP=/home/downloads/java/drops/icedtea7/2.5/jaxws.tar.gz
JDK7_25_ZIP=/home/downloads/java/drops/icedtea7/2.5/jdk.tar.gz
LANGTOOLS7_25_ZIP=/home/downloads/java/drops/icedtea7/2.5/langtools.tar.gz
HOTSPOT7_25_ZIP=/home/downloads/java/drops/icedtea7/2.5/hotspot.tar.gz
OPENJDK8_ZIP=/home/downloads/java/drops/icedtea8/openjdk.tar.xz
CORBA8_ZIP=/home/downloads/java/drops/icedtea8/corba.tar.xz
JAXP8_ZIP=/home/downloads/java/drops/icedtea8/jaxp.tar.xz
JAXWS8_ZIP=/home/downloads/java/drops/icedtea8/jaxws.tar.xz
JDK8_ZIP=/home/downloads/java/drops/icedtea8/jdk.tar.xz
LANGTOOLS8_ZIP=/home/downloads/java/drops/icedtea8/langtools.tar.xz
NASHORN8_ZIP=/home/downloads/java/drops/icedtea8/nashorn.tar.xz
HOTSPOT8_ZIP=/home/downloads/java/drops/icedtea8/hotspot.tar.xz
VISUALVM_ZIP=/usr/portage/distfiles/visualvm-20080728-src.tar.gz
NETBEANS_PROFILER_ZIP=/usr/portage/distfiles/netbeans-profiler-visualvm_preview2.tar.gz
NETBEANS_BASIC_CLUSTER_ZIP=/usr/portage/distfiles/netbeans-6.1-200805300101-basic_cluster-src.zip 
JAXP7_DROP_ZIP=${DROPS_DIR}/jaxp.zip
JAXWS7_DROP_ZIP=${DROPS_DIR}/jaxws.zip
JAF7_DROP_ZIP=${DROPS_DIR}/jaf.zip
JAXP6_DROP_ZIP=${DROPS_DIR}/jaxp6.zip
JAXP6_18_DROP_ZIP=${DROPS_DIR}/jdk6-jaxp-2009_10_13.zip
JAXP6_19_DROP_ZIP=${DROPS_DIR}/jdk6-jaxp-b20.zip
JAXP6_HG_DROP_ZIP=${DROPS_DIR}/jaxp6-hg.zip
JAXWS6_DROP_ZIP=${DROPS_DIR}/jaxws6.zip
JAXWS6_18_DROP_ZIP=${DROPS_DIR}/jdk6-jaxws-2009_10_27.zip
JAXWS6_19_DROP_ZIP=${DROPS_DIR}/jdk6-jaxws-b20.zip
JAXWS6_HG_DROP_ZIP=${DROPS_DIR}/jaxws6-hg.zip
JAF6_DROP_ZIP=${DROPS_DIR}/jaf6.zip
JAF6_18_DROP_ZIP=${DROPS_DIR}/jdk6-jaf-2009_10_27.zip
JAF6_19_DROP_ZIP=${DROPS_DIR}/jdk6-jaf-b20.zip
JAF6_HG_DROP_ZIP=${DROPS_DIR}/jaf6-hg.zip
OPENJDK_WITH_ZERO=no
OPENJDK_WITH_WARNINGS=yes
OPENJDK_WITH_DOCS=no
OPENJDK_WITH_SYSTEM_LCMS=yes
OPENJDK_WITH_SYSTEM_GIO=yes
OPENJDK_WITH_SYSTEM_GSETTINGS=yes
OPENJDK_WITH_SYSTEM_GCONF=yes
OPENJDK_WITH_SYSTEM_ZLIB=no
OPENJDK_WITH_SYSTEM_PCSC=yes
OPENJDK_WITH_SYSTEM_JPEG=yes
OPENJDK_WITH_SYSTEM_PNG=yes
OPENJDK_WITH_SYSTEM_GIF=yes
OPENJDK_WITH_SYSTEM_GTK=yes
OPENJDK_WITH_SYSTEM_CUPS=yes
OPENJDK_WITH_SYSTEM_FONTCONFIG=yes
OPENJDK_WITH_SUNEC=yes
OPENJDK_WITH_JAVA_WERROR=yes
OPENJDK_WITH_GCC_WERROR=no
OPENJDK_WITHOUT_HOTSPOT=no
OPENJDK_WITH_DEBUG=no
XMMS_DEBUG=yes
TRIM_DEBUG=yes
AZTOOLS_HOME=$HOME/projects/openjdk/mri/aztools
AZTOOLS_INSTALL=$INSTALL_DIR/aztools
AZHOTSPOT=${WORKING_DIR}/openjdk.mri/hotspot
ICEDTEA_WEB_HOME=$HOME/projects/openjdk/icedtea-web
ICEDTEA_WEB_INSTALL=${ICEDTEA7_INSTALL}
ICEDTEA_WEB_JDK=${ICEDTEA7_INSTALL}
ICEDTEA_SOUND_HOME=$HOME/projects/openjdk/icedtea-sound
ICEDTEA_SOUND_INSTALL=$INSTALL_DIR/icedtea-sound
ICEDTEA_SOUND_JDK=${ICEDTEA6_INSTALL}
MUSIK_HOME=$HOME/projects/musik
MUSIK_INSTALL=$INSTALL_DIR/musik
MUSIK_JDK=${SYSTEM_ICEDTEA6}
LOG_DIR=${WORKING_DIR}/logs
REBUILD_ICEDTEA_JAPI=no
REBUILD_LIBGCJ_JAPI=no
JPEG_JAPI_COMPARISON=no
MAKE_VARIABLE_WARNINGS=no

if test "${ARCH}" == "x86_64"; then
    JDK_ARCH=amd64;
else
    JDK_ARCH=${ARCH};
fi

case "${JDK_ARCH}" in
    amd64)
	DATA_MODEL=64;
	ENDIAN=little;
	;;
    ppc)
	DATA_MODEL=32;
	ENDIAN=big;
	;;
    ppc64)
	DATA_MODEL=64;
	ENDIAN=big;
	;;
esac

if [ -e /etc/make.conf ] ; then
   CHOST=$(grep CHOST /etc/make.conf|sed -e 's#CHOST="##' -e 's#"$##')
   echo "CHOST set to ${CHOST}"
   CFLAGS=$(grep '^CFLAGS=' /etc/make.conf|sed -e 's#CFLAGS="##' -e 's#"$##')
   echo "CFLAGS set to ${CFLAGS}"
fi
